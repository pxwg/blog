---
import { getCurrentLanguage, generateLanguageLinks, translations } from "$utils/i18n";

interface Props {
  articleId?: string;
}

const { articleId } = Astro.props;

// Get current locale from URL
const currentLocale = getCurrentLanguage(Astro.url.pathname);

// Generate language toggle links
const links = generateLanguageLinks(Astro.url.pathname, currentLocale);
---

<div class="language-toggle">
  <a
    href={links.zh}
    class="lang-link"
    title={translations.switchToChinese}
    aria-label="Switch to Chinese"
    data-lang="zh"
  >
    中文
  </a>
  <span class="separator" aria-hidden="true">|</span>
  <a
    href={links.en}
    class="lang-link"
    title={translations.switchToEnglish}
    aria-label="Switch to English"
    data-lang="en"
  >
    EN
  </a>
</div>

<style>
  .language-toggle {
    display: flex;
    align-items: center;
    gap: 0.5em;
    font-size: 0.9em;
    position: relative;
    z-index: 10;
    right: 9px;
  }
  
  .lang-link {
    color: var(--gray-color);
    text-decoration: none;
    padding: 0.25em .5em;
    border-radius: 3px;
    transition: color .2s, background-color .2s, border-bottom .2s;
    font-weight: 300;
    border-bottom: 2px solid transparent;
    background: none;
    border: none;
    cursor: pointer;
    font-family: inherit;
    font-size: inherit;
  }
  
  .lang-link:hover {
    color: var(--main-hover-color);
  }
  
  html[lang="zh"] .language-toggle .lang-link[data-lang="zh"],
  /* When the html tag has lang="en", highlight the English link. */
  html[lang="en"] .language-toggle .lang-link[data-lang="en"] {
    color: var(--accent);
    font-weight: 400;
    border-bottom-color: var(--accent);
    text-decoration: underline;
  }
  
  .separator {
    color: var(--gray-color);
    opacity: 0.5;
    font-weight: 300;
  }
</style>
