---
import { getCurrentLanguage, generateLanguageToggleUrl } from "$utils/i18n";

interface Props {
  articleId?: string;
}

const { articleId } = Astro.props;

// Get current locale from URL
const currentLocale = getCurrentLanguage(Astro.url.pathname);

// Generate URLs for both languages
const enUrl = generateLanguageToggleUrl(Astro.url.pathname, 'en');
const zhUrl = generateLanguageToggleUrl(Astro.url.pathname, 'zh');
---

<div class="language-toggle">
  {currentLocale === 'zh' ? (
    <>
      <a href={enUrl} class="lang-link" data-lang="en">EN</a>
    </>
  ) : (
    <>
      <a href={zhUrl} class="lang-link" data-lang="zh">中文</a>
    </>
  )}
</div>

<style>
  .language-toggle {
    display: flex;
    align-items: center;
    gap: 0.5em;
    font-size: 0.9em;
    position: relative;
    z-index: 10;
    right: 9px;
  }

  .lang-link {
    color: var(--gray-color);
    text-decoration: none;
    padding: 0.25em .5em;
    border-radius: 3px;
    transition: color .2s, background-color .2s, border-bottom .2s;
    font-weight: 300;
    border-bottom: 2px solid transparent;
    background: none;
    border: none;
    cursor: pointer;
    font-family: inherit;
    font-size: inherit;
  }

  .lang-link:hover {
    color: var(--main-hover-color);
  }

  .current-lang {
    color: var(--accent);
    font-weight: 400;
    padding: 0.25em .5em;
    border-bottom: 2px solid var(--accent);
  }

  .separator {
    color: var(--gray-color);
    opacity: 0.5;
    font-weight: 300;
  }
</style>
